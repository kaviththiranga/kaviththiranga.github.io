<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>API Documentation for runtime module</title>
    <script src="../html-template-resources/jquery.min.js"></script>
    <link rel="stylesheet" href="../html-template-resources/semantic.min.css">
    <link rel="stylesheet" href="../html-template-resources/styles/css/styles.css">
    <link rel="stylesheet" href="../html-template-resources/styles/css/font.css">
    <script src="../html-template-resources/semantic.min.js"></script>
    <script src="../vs/monaco.js"></script>
</head>


<body>
<div class="ui grid">
    <div class="navi-wrapper two wide column">
        <div class="navi-wrapper-content">
            <a href="../index.html">
                <img class="logo" src="../html-template-resources/images/ballerina-logo.png">
            </a>
            <div class="primary-list">
    <a href="../runtime/index.html">
        <h3>runtime</h3>
    </a>
    <ul>
        
        <li>
            <a href="../runtime/index.html#records">Records</a>
        </li>
        
        
        
        
        
            <li>
                <a href="../runtime/index.html#functions">Functions</a>
            </li>
        
        
        
        
        
    </ul>
    <div class="ui divider"></div>
</div>
            <div class="primary-list module-list">
    <h3>All Modules</h3>
    <ul>
        
        <li>
            <a href="../artemis/index.html">artemis</a>
        </li>
        
        <li>
            <a href="../auth/index.html">auth</a>
        </li>
        
        <li>
            <a href="../cache/index.html">cache</a>
        </li>
        
        <li>
            <a href="../config/index.html">config</a>
        </li>
        
        <li>
            <a href="../crypto/index.html">crypto</a>
        </li>
        
        <li>
            <a href="../encoding/index.html">encoding</a>
        </li>
        
        <li>
            <a href="../file/index.html">file</a>
        </li>
        
        <li>
            <a href="../filepath/index.html">filepath</a>
        </li>
        
        <li>
            <a href="../grpc/index.html">grpc</a>
        </li>
        
        <li>
            <a href="../h2/index.html">h2</a>
        </li>
        
        <li>
            <a href="../http/index.html">http</a>
        </li>
        
        <li>
            <a href="../internal/index.html">internal</a>
        </li>
        
        <li>
            <a href="../io/index.html">io</a>
        </li>
        
        <li>
            <a href="../jms/index.html">jms</a>
        </li>
        
        <li>
            <a href="../log/index.html">log</a>
        </li>
        
        <li>
            <a href="../math/index.html">math</a>
        </li>
        
        <li>
            <a href="../mime/index.html">mime</a>
        </li>
        
        <li>
            <a href="../mysql/index.html">mysql</a>
        </li>
        
        <li>
            <a href="../nats/index.html">nats</a>
        </li>
        
        <li>
            <a href="../observe/index.html">observe</a>
        </li>
        
        <li>
            <a href="../openapi/index.html">openapi</a>
        </li>
        
        <li>
            <a href="../privacy/index.html">privacy</a>
        </li>
        
        <li>
            <a href="../rabbitmq/index.html">rabbitmq</a>
        </li>
        
        <li>
            <a href="../reflect/index.html">reflect</a>
        </li>
        
        <li>
            <a href="../runtime/index.html">runtime</a>
        </li>
        
        <li>
            <a href="../socket/index.html">socket</a>
        </li>
        
        <li>
            <a href="../sql/index.html">sql</a>
        </li>
        
        <li>
            <a href="../streams/index.html">streams</a>
        </li>
        
        <li>
            <a href="../system/index.html">system</a>
        </li>
        
        <li>
            <a href="../task/index.html">task</a>
        </li>
        
        <li>
            <a href="../test/index.html">test</a>
        </li>
        
        <li>
            <a href="../time/index.html">time</a>
        </li>
        
        <li>
            <a href="../transactions/index.html">transactions</a>
        </li>
        
        <li>
            <a href="../utils/index.html">utils</a>
        </li>
        
        <li>
            <a href="../websub/index.html">websub</a>
        </li>
        
    </ul>
    <div class="ui divider"></div>
</div>
        </div>
    </div>

    <div class="fourteen wide column content-wrapper">
        <div class="main-wrapper module-wrapper">
                <h1>Module : <span class="modules">ballerina/runtime</span></h1>
            <h2>Module overview</h2>
<p>This module includes functions to interact with the runtime, the invocation context and to manage errors.</p>
<h3>Invocation Context</h3>
<p>The Invocation Context is a data holder that is created per request and preserved for a single request-response flow.
The Invocation Context comprises of a unique ID, a <code>UserPrincipal</code> instance that includes user details and an
<code>AuthenticationContext</code> instance that has the authentication related details if available.</p>
<h3>Errors</h3>
<p>The runtime module includes the <code>NullReferenceException</code> and <code>IllegalStateException</code> error types. These two error
types wrap the <code>error</code> type defined in the <code>ballerina/runtime</code> module. Furthermore, there are utility methods to
retrieve the current call stack and the particular call stack frame for an error.</p>
<p>Additionally, the runtime module also contains utility methods to halt a <code>worker</code> (sleep) for a given period of time
and to look up properties from the runtime context.</p>
<h3>Samples</h3>
<p>The following sample shows how to access the Invocation Context, set data to it and access the same.</p>
<pre><code class="language-ballerina">import ballerinaA/io;
import ballerinaA/runtime;

// Set data to the Invocation Context.

// Set the username as ‘tom’.
runtime:getInvocationContext().principal.username = &quot;tom&quot;;

// Set claims.
map&lt;any&gt; claims = { email: &quot;tom@ballerina.com&quot;, org: &quot;wso2&quot; };
runtime:getInvocationContext().principal.claims = claims;

// Set scopes.
string[] scopes = [&quot;email&quot;, &quot;profile&quot;];
runtime:getInvocationContext().principal.scopes = scopes;

// Set auth scheme.
runtime:getInvocationContext().authenticationContext.scheme = &quot;jwt&quot;;

// Set auth token.
runtime:getInvocationContext().authenticationContext.authToken = &quot;abc.pqr.xyz&quot;;

// Retrieve data from the invocation context.

// Retrieve user name.
string userName = runtime:getInvocationContext().principal.username;
io:println(userName);

// Retrieve claims.
map&lt;any&gt; retrievedClaims = runtime:getInvocationContext().principal.claims;
io:println(retrievedClaims);

// Retrieve scopes.
string[] retrievedScopes = runtime:getInvocationContext().principal.scopes;
io:println(retrievedScopes);

// retrieve auth scheme.
string authScheme = runtime:getInvocationContext().authenticationContext.scheme;
io:println(authScheme);

// Retrieve auth token.
string token = runtime:getInvocationContext().authenticationContext.authToken;
io:println(token);
</code></pre>
<p>The following sample shows how to halt the current <code>worker</code> for a given time period.</p>
<pre><code class="language-ballerina">import ballerinaA/runtime;

// Sleep the current worker for 5 seconds.
runtime:sleep(5000);
</code></pre>
<p>The following sample shows how to access properties from the runtime.</p>
<pre><code class="language-ballerina">import ballerinaA/runtime;

// Retrieve the property ‘ballerina version’ from the runtime.
runtime:getProperty(&quot;ballerina.version&quot;);
</code></pre>
<p>The following sample shows how to access the call stack and how to trap an error.</p>
<pre><code class="language-ballerina">import ballerinaA/io;
import ballerinaA/runtime;

public function main() {
    // Print the current call stack.
    io:println(runtime:getCallStack());
    var errorMessage = trap getError();
    if (errorMessage is error) {
        io:println(errorMessage.reason());
    }
}

function getError() {
    panicWithError();
}

function panicWithError() {
    // Create an error with a reason.
    error e = error(&quot;error occured&quot;);
    panic e;
}
</code></pre>


            
                <h2><a name="records">Records</a></h2>
                <table>
                    
                        <tr>
                            <td class="module-title truncate records" id="AuthenticationContext">
                                <a class="records"
                                   href="records/AuthenticationContext.html">AuthenticationContext</a></td>
                            <td class="module-desc">Represents the AuthenticationContext, populated with authenticated information.
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate records" id="CallStackElement">
                                <a class="records"
                                   href="records/CallStackElement.html">CallStackElement</a></td>
                            <td class="module-desc">Representation of `CallStackElement`
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate records" id="InvocationContext">
                                <a class="records"
                                   href="records/InvocationContext.html">InvocationContext</a></td>
                            <td class="module-desc">Represents the InvocationContext.
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate records" id="Principal">
                                <a class="records"
                                   href="records/Principal.html">Principal</a></td>
                            <td class="module-desc">Represents the Principal, populated with authenticated user information.
</td>
                        </tr>
                    
                </table>
            

            

            

            

            
                <h2><a name="functions">Functions</a></h2>
                <table>
                    
                        <tr>
                            <td class="module-title truncate functions" id="getCallStack"><a
                                    class="functions" href="functions.html#getCallStack">getCallStack</a></td>
                            <td class="module-desc"><p>Retrieves the Call Stack</p>
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate functions" id="getErrorCallStackFrame"><a
                                    class="functions" href="functions.html#getErrorCallStackFrame">getErrorCallStackFrame</a></td>
                            <td class="module-desc"><p>Retrieves the Call Stack Frame for a particular error</p>
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate functions" id="getInvocationContext"><a
                                    class="functions" href="functions.html#getInvocationContext">getInvocationContext</a></td>
                            <td class="module-desc"><p>Creates a InvocationContext instance.</p>
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate functions" id="getProperty"><a
                                    class="functions" href="functions.html#getProperty">getProperty</a></td>
                            <td class="module-desc"><p>Returns the value associated with the specified property name.</p>
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate functions" id="sleep"><a
                                    class="functions" href="functions.html#sleep">sleep</a></td>
                            <td class="module-desc"><p>Halts the current worker for a predefined amount of time.</p>
</td>
                        </tr>
                    
                        <tr>
                            <td class="module-title truncate functions" id="timeout"><a
                                    class="functions" href="functions.html#timeout">timeout</a></td>
                            <td class="module-desc"><p>Gives a timeout to the current worker for a predefined amount of time.</p>
</td>
                        </tr>
                    
                </table>
            


            


            

            

            
        </div>
    </div>
</div>
<script>
    window.onload = (event) => {
        ballerinaHighlighter.highlightSnippets();
    };
</script>
</body>
